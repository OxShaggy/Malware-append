#-------------------------
#This script is going to add a file extension to all files from parent down
#-------------------------

Get-ChildItem -exclude *.zip,*.7z,*.mal, -Recurse -Path 'D:\Malware_Samples\Current'
    | Where-Object{!$_.PsIsContainer} 
    | Rename-Item -newname {$_.name + ".mal"}

# Reference for how to remove all extensions in path/directory
# Get-ChildItem -Include *.zip*,*.7z -Path D:\Malware_Samples\Test\* 
# | Where-Object {!$_.psiscontainer} 
# |Rename-Item -NewName {$_.name -replace ".mal"}


#-------------------
#Eveyrthing below here I tried to make work but I need to look into why it didn't. May have been trying to over complicate it...
#-------------------

#Ask for path to directories
#$Path = 'C:\Test'

#Test if directory is valid
   #$message = (Test-Path $Path) ? "Path exists" : "Path not found"
    #if ($path -eq 'True') {
        #ELSE {$Path -eq 'false' | Write-Host $path 'is not a valid path'}
    #}

#Prompt for extension type
#$Extension = Read-Host -Prompt 'Please enter the extension to add to files'

    #add path to childItem excluding .zip
    #Then choose all remaining extensions
    #Replace old extension with new
    #Get-ChildItem -Force -file -Exclude '*.zip' -Path $Path |    
    #Where-Object { ($_.Extension -eq "") } |    
    #Rename-Item -NewName { "{0}{1}" -f $_.BaseName, ($_.Extension -Replace "", ".mal") }


#---------------------------------
#TBD: Add function to get hash of all files and add it to csv
#TBD: put each file in it's own folder? and append md5 to begginning of name
    #Maybe: dir -recurse |Get-FileHash -Algorithm MD5 |Select-Object Hash,Path,@{Name='Name';Expression={[System.IO.Path]::GetFileName($_.Path)}} |Export-Csv filename.csv
#---------------------------------
